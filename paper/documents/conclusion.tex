\section{まとめ}
\label{section:まとめ}
\subsection{考察}
\label{subsection:考察}
観光案内アプリはコンテンツの配信を中心とするサービスである。現在配信されている観光案内アプリに実装されている機能の多くは先にユーザーからのアクションを必要とするため、Background Fetch APIやBackground Synchronization APIを使用したバックグラウンドでのコンテンツの取得や更新の需要はまだ小さいことが分かる。これらのWeb APIを使用したバックグラウンド処理はWebページの再読み込みの手間やコンテンツのダウンロードの手間を削減するが、ユーザーがその処理の流れを理解しにくいためプライバシー上の懸念がある。

一方で、現在配信されている観光案内アプリにおいては、GPSなどを使用した位置情報の取得が普及していることから、位置情報は観光地図などの機能を適切に動作させるために不可欠な仕組みであると言える。この仕組みをPWAに取り入れるためにはGeolocation APIを使用することが一般的である。アプリがGeolocation APIを使用してユーザーの位置情報にアクセスするためには、ユーザーがアプリに対してプロンプト経由で明示的にアクセスを許可する必要があり、かつユーザーにとってその流れが直感的であるため、観光案内アプリにおいて活用が期待される。

アプリの進化の歴史を踏まえると、アプリのインタラクティブ性は今後ますます高まると考えられる。前述したように、現在配信されている観光案内アプリの多くは受動的であり、アプリからユーザーへの積極的な情報発信が少ない。しかし、今後アプリのインタラクティブ化が進めば、ユーザーに適した観光名所の提案や、新しい観光名所の紹介がアプリのアクションをきっかけに行われるようになる可能性もある。このような機能がより一般的になれば、Push APIとNotifications APIを用いたプッシュ通知の価値が高まり、最終的にはPWAの有用性が向上するかもしれない。

ユーザー間で観光名所の情報を共有する機能を持った観光案内アプリもある。このような機能を実装する場合はMedia Capture and Streams APIを始めとするメディアの制御に関するWeb APIを利用できる。このWeb APIを用いることでファイルやストリームを容易に作成できる。ファイルやストリームを操作するWeb APIは多くのWebブラウザーがサポートしているが、ファイルシステムにアクセスするためのWeb APIは権限が大きすぎるという理由で一部のWebブラウザーベンダーが反対している。そのため、ディレクトリを管理するような複雑な操作をWebアプリに実装することは実質的には不可能である。

観光案内アプリにService Workerを追加するとコンテンツをキャッシュできるようになる。全てのネットワークレスポンスをキャッシュした場合は、2回目以降のページ読み込みではユーザーの端末内のストレージからそのコンテンツが取り出されるため、瞬時にページが表示され、最大のパフォーマンスを得られる。しかし、全てのネットワークレスポンスをキャッシュする方法を採用するとユーザーの端末内のストレージ容量を過剰に消費してしまう可能性がある。このような場合は特定の形式のファイルのみをキャッシュしたり、特定のオリジンのコンテンツのみをキャッシュしたりすることが推奨される。観光案内アプリで、画像をキャッシュした場合とSame-Originのネットワークレスポンスをキャッシュした場合を比べると、画像をキャッシュした場合はFCPの値が小さく、Same-Originのネットワークレスポンスをキャッシュした場合はSIの値が小さい。Same-OriginのネットワークレスポンスはHTML、CSS、JavaScript、JSONを中心に構成されるが、これらはいずれも画像に比べてファイルサイズが小さいため、Same-Originのネットワークレスポンスをキャッシュした場合はSIの値が小さくなりやすいと考えられる。一方で画像をキャッシュした場合は、ページの最初のコンテンツをレンダリングするために必要なHTMLをサーバーから取得する必要があるため、FCPが小さくなりやすいと考えられる。観光案内アプリでService Workerを使用することで、それぞれのアプリの特徴に合ったキャッシュ管理ができ、クライアントのストレージ容量の消費を節約しながらアプリのパフォーマンスを改善できる。

PWAの導入後のパフォーマンスを計測する方法は改善の余地がある。例えば、ユーザーのインタラクションの遅延を計測することで、実際のユーザビリティーをより正確に評価できる。LighthouseはFirst Input Delay(FID)をInteraction to Next Paint(INP)に置き換えようとしている。INPはユーザーがページで行う全てのインタラクションの遅延を計測し、最も長いインタラクションを算出する。INPはクリック、タップ、キーボードの押下のインタラクションを計測できるが、スクロールやズームのインタラクションは計測できない。これらのインタラクションは観光案内アプリに実装されることが多い機能の1つである観光地図で多用されるものであるため、それを考慮することでより正確なパフォーマンスを算出できる。

インタラクションの遅延はユーザビリティーに影響する。ISO 9241-11の定義によれば、モバイルアプリのユーザビリティーとは、特定の利用状況において、有効性、効率性、満足度を伴って特定の目標を達成するために特定のユーザーが製品を使用できる程度を指す。研究で扱われることが多い、モバイルアプリのユーザビリティーの属性の上位5つは、効率性、満足度、有効性、学びやすさ、覚えやすさである~\cite{PawelUsabilityofMobileApplications}。効率性はユーザーがタスクを迅速かつ正確に完了する能力である。満足度はユーザーが認識した快適さと喜びの程度である。有効性はユーザーが特定の状況でタスクを完了させる能力である。学びやすさはユーザーがガイダンスを受けたりドキュメントを参照したりすることなく、新たに遭遇したシステムと対話することが容易である程度や、ユーザーがアプリに習熟する能力である。覚えやすさはユーザーがアプリを効果的に使用する方法を覚えやすい程度である。インタラクションの遅延はユーザビリティーの属性のうち、効率性、満足度、有効性を低下させると考えられる。そのため、インタラクションの遅延を評価するための方法を確立することは、観光案内アプリに代表されるようなインタラクティブ性が高いアプリのユーザビリティーを高める上で重要である。
\subsection{結論}
\label{subsection:結論}
