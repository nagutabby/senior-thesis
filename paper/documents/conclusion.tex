\section{まとめ}\label{section:まとめ}
%\begin{itemize}
%  \item Web API
%  \begin{itemize}
%    \item モバイル端末へのアクセス
%    \begin{itemize}
%      \item モバイル端末の主要な機能にアクセスするためのWeb APIの対応状況や懸念点を述べる
%    \end{itemize}
%    \item バックグラウンドでの動作
%    \begin{itemize}
%      \item バックグラウンドでWebアプリを動作させるために必要なWeb APIの短所と課題を述べる
%    \end{itemize}
%  \end{itemize}
%  \item Service Worker
%  \begin{itemize}
%    \item キャッシュ制御
%    \begin{itemize}
%      \item Service Workerを利用することでキャッシュを柔軟に制御でき、古い世代のモバイル通信システムを使用した場合や一部のコンテンツのみをキャッシュした場合でもパフォーマンスの低下を抑えられることを述べる
%    \end{itemize}
%  \end{itemize}
%\end{itemize}
\subsection{観光案内アプリにおけるPWAの評価と課題}\label{subsection:観光案内アプリにおけるPWAの評価と課題}
観光案内アプリはコンテンツの配信を中心とするサービスである。現在配信されている観光案内アプリに実装されている機能の多くは先にユーザーからのアクションを必要とするため、Background Fetch APIやBackground Synchronization APIを使用したバックグラウンドでのコンテンツの取得や更新の需要はまだ小さいことが分かる。これらのWeb APIを使用したバックグラウンド処理はWebページの再読み込みの手間やコンテンツのダウンロードの手間を削減するが、ユーザーがその処理の流れを理解しにくいためプライバシー上の懸念がある。

一方で、現在配信されている観光案内アプリにおいては、GPSなどを使用した位置情報の取得が普及していることから、位置情報は観光地図などの機能を適切に動作させるために不可欠な仕組みであると言える。この仕組みをPWAに取り入れるためにはGeolocation APIを使用することが一般的である。アプリがGeolocation APIを使用してユーザーの位置情報にアクセスするためには、ユーザーがアプリに対してプロンプト経由で明示的にアクセスを許可する必要があり、かつユーザーにとってその流れが直感的であるため、観光案内アプリにおいて活用が期待される。

アプリの進化の歴史を踏まえると、アプリのインタラクティブ性は今後ますます高まると考えられる。前述したように、現在配信されている観光案内アプリの多くは受動的であり、アプリからユーザーへの積極的な情報発信が少ない。しかし、今後アプリのインタラクティブ化が進めば、ユーザーに適した観光名所の提案や、新しい観光名所の紹介がアプリのアクションをきっかけに行われるようになる可能性もある。このような機能がより一般的になれば、Push APIとNotifications APIを用いたプッシュ通知の価値が高まり、最終的にはPWAの有用性が向上するかもしれない。

ユーザー間で観光名所の情報を共有する機能を持った観光案内アプリもある。このような機能を実装する場合はMedia Capture and Streams APIを始めとするメディアの制御に関するWeb APIを利用できる。このWeb APIを用いることでファイルやストリームを容易に作成できる。ファイルやストリームを操作するWeb APIは多くのWebブラウザーがサポートしているが、ファイルシステムにアクセスするためのWeb APIは権限が大きすぎるという理由で一部のWebブラウザーベンダーが反対している。そのため、ディレクトリを管理するような複雑な操作をWebアプリに実装することは実質的には不可能である。

観光案内アプリにService Workerを追加するとコンテンツをキャッシュできるようになる。全てのネットワークレスポンスをキャッシュした場合は、2回目以降のページ読み込みではユーザーの端末内のストレージからそのコンテンツが取り出されるため、瞬時にページが表示され、最大のパフォーマンスを得られる。しかし、全てのネットワークレスポンスをキャッシュする方法を採用するとユーザーの端末内のストレージ容量を過剰に消費してしまう可能性がある。このような場合は特定の形式のファイルのみをキャッシュしたり、特定のオリジンのコンテンツのみをキャッシュしたりすることが推奨される。観光案内アプリで、画像をキャッシュした場合とSame-Originのネットワークレスポンスをキャッシュした場合を比べると、画像をキャッシュした場合はFCPの値が小さく、Same-Originのネットワークレスポンスをキャッシュした場合はSIの値が小さい。Same-OriginのネットワークレスポンスはHTML、CSS、JavaScript、JSONを中心に構成されるが、これらはいずれも画像に比べてファイルサイズが小さいため、Same-Originのネットワークレスポンスをキャッシュした場合はSIの値が小さくなりやすいと考えられる。一方で画像をキャッシュした場合は、ページの最初のコンテンツをレンダリングするために必要なHTMLをサーバーから取得する必要があるため、FCPが小さくなりやすいと考えられる。観光案内アプリでService Workerを使用することで、それぞれのアプリの特徴に合ったキャッシュ管理ができ、クライアントのストレージ容量の消費を節約しながらアプリのパフォーマンスを改善できる。